import{_ as i,c as a,a as h,o as k}from"./app-k3221GFj.js";const n={};function l(p,s){return k(),a("div",null,s[0]||(s[0]=[h(`<p>在我使用的众多linux分析工具中，sar是一个非常全面的一个分析工具，可以比较瑞士军刀，对文件的读写，系统调用的使用情况，磁盘IO，CPU相关使用情况，内存使用情况，进程活动等都可以进行有效的分析。sar工具将对系统当前的状态进行取样，然后通过计算数据和比例来表达系统的当前运行状态。它的特点是可以连续对系统取样，获得大量的取样数据。取样数据和分析的结果都可以存入文件，使用它时消耗的系统资源很小。</p><p>话不多说，直接--help查看一下先。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar --help</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Usage:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ </span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">options</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">interva</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [ </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">coun</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">t</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ]</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Options</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> are:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -A </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -B </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -C </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -d</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -h</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -m </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -p</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -q </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -r</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -R </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -S</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -t</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -u</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ALL </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -v </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -V </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -w</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -W </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -y </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -I { </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">int</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,...</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> SUM </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ALL </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> XALL } </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -P { </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">cpu</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,...</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ALL } </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -j { ID </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> LABEL </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> PATH </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> UUID </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">|</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ... } </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -n</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> { </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">keyword</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">,...</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> ALL } </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -o</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">filename</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -f</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">filename</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> --legacy </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -i </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">interval</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -s</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hh:mm:ss</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -e</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">hh:mm:ss</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-A：所有报告的总和</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-u：输出CPU使用情况的统计信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-v：输出inode、文件和其他内核表的统计信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-d：输出每一个块设备的活动信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-r：输出内存和交换空间的统计信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-b：显示I/O和传送速率的统计信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-R：输出内存页面的统计信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-y：终端设备活动情况</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-w：输出系统交换活动信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-B：显示换页状态；</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-e：设置显示报告的结束时间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-f：从指定文件提取报告</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-i：设状态信息刷新的间隔时间</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-p：报告每个CPU的状态</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-q：平均负载分析</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用语法：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sar</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> [options] </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-A</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">-o file</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">interval</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &lt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">count</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">其中：interval为采样间隔，count为采样次数，默认值是1；</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">     -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file表示将命令结果以二进制格式存放在文件中，file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 是文件名</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="二、统计cpu使用情况" tabindex="-1"><a class="header-anchor" href="#二、统计cpu使用情况"><span>二、统计CPU使用情况</span></a></h1><p>sar -u #统计CPU的使用情况，每间隔1秒钟统计一次总共统计三次：#sar -u 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -u 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:42:45</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     CPU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %user</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %nice</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   %system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   %iowait</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    %steal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %idle</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:42:46</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    100.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:42:47</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     99.94</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:42:48</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     99.94</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.02</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.02</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     99.96</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -o test.txt -u 1 3  </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#其中-o表示以二进制的格式把结果存入到test.txt文件中，不能使用cat，more，less等查看</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -u -f test.txt   </span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#查看该二进制结果文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:46:14</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     CPU</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %user</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %nice</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   %system</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   %iowait</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    %steal</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %idle</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:46:15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    100.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:46:16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     99.94</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:46:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     99.97</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        all</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.01</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.02</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     99.97</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>%user #用户空间的CPU使用</p><p>%nice 改变过优先级的进程的CPU使用率</p><p>%system 内核空间的CPU使用率</p><p>%iowait CPU等待IO的百分比</p><p>%steal 虚拟机的虚拟机CPU使用的CPU</p><p>%idle 空闲的CPU</p><p>在以上的显示当中，主要看%iowait和%idle，%iowait过高表示存在I/O瓶颈，即磁盘IO无法满足业务需求，如果%idle过低表示CPU使用率比较严重，需要结合内存使用等情况判断CPU是否瓶颈。</p><h1 id="三、平均负载统计分析" tabindex="-1"><a class="header-anchor" href="#三、平均负载统计分析"><span>三、平均负载统计分析</span></a></h1><p>sar -q #查看平均负载：其中每间隔1秒钟统计一次总共统计三次 #sar -q 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -q 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:58:39</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   runq-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  plist-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ldavg-1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   ldavg-5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  ldavg-15</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:58:40</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1535</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:58:41</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1535</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">09:58:42</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1535</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">            0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1535</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.03</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>runq-sz 运行队列的长度（等待运行的进程数，每核的CP不能超过3个）</p><p>plist-sz 进程列表中的进程（processes）和线程数（threads）的数量</p><p>ldavg-1 最后1分钟的CPU平均负载，即将多核CPU过去一分钟的负载相加再除以核心数得出的平均值，5分钟和15分钟以此类推</p><p>ldavg-5 最后5分钟的CPU平均负载</p><p>ldavg-15 最后15分钟的CPU平均负载</p><h1 id="四、内存统计分析" tabindex="-1"><a class="header-anchor" href="#四、内存统计分析"><span>四、内存统计分析</span></a></h1><p>sar -r #查看内存使用情况，每间隔1秒钟统计一次总共统计三次：#sar -r 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -r 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:01:15</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kbmemfree</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kbmemused</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  %memused</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kbbuffers</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  kbcached</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  kbcommit</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   %commit</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:01:16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 233550984</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  30597240</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     11.58</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    758212</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  20745900</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  14822388</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5.44</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:01:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 233550836</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  30597388</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     11.58</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    758212</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  20745900</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  14822388</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5.44</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:01:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 233551972</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  30596252</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     11.58</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    758212</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  20745900</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  14822388</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5.44</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    233551264</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  30596960</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     11.58</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    758212</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  20745900</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  14822388</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5.44</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kbmemfree 空闲的物理内存大小</p><p>kbmemused 使用中的物理内存大小</p><p>%memused 物理内存使用率</p><p>kbbuffers 内核中作为缓冲区使用的物理内存大小，kbbuffers和kbcached:这两个值就是free命令中的buffer和cache.</p><p>kbcached 缓存的文件大小</p><p>kbcommit 保证当前系统正常运行所需要的最小内存，即为了确保内存不溢出而需要的最少内存（物理内存+Swap分区）</p><p>commit 这个值是kbcommit与内存总量（物理内存+swap分区）的一个百分比的值</p><h1 id="五、统计swap分区" tabindex="-1"><a class="header-anchor" href="#五、统计swap分区"><span>五、统计swap分区</span></a></h1><p>sar -W #查看系统swap分区的统计信息：每间隔1秒钟统计一次总共统计三次：#sar -W 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -W 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:03:21</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  pswpin/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pswpout/s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:03:22</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:03:23</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:03:24</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pswpin/s 每秒从交换分区到系统的交换页面（swap page）数量</p><p>pswpott/s 每秒从系统交换到swap的交换页面（swap page）的数量</p><h1 id="六、查看磁盘io" tabindex="-1"><a class="header-anchor" href="#六、查看磁盘io"><span>六、查看磁盘IO</span></a></h1><p>sar -b #查看I/O和传递速率的统计信息，每间隔1秒钟统计一次总共统计三次：#sar -b 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -b 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:06:16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       tps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      rtps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      wtps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bread/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   bwrtn/s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:06:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     30.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     30.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    240.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:06:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:06:19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">        10.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     10.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     80.00</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tps 磁盘每秒钟的IO总数，等于iostat中的tps</p><p>rtps 每秒钟从磁盘读取的IO总数</p><p>wtps 每秒钟从写入到磁盘的IO总数</p><p>bread/s 每秒钟从磁盘读取的块总数</p><p>bwrtn/s 每秒钟此写入到磁盘的块总数</p><h1 id="七、查看磁盘使用情况" tabindex="-1"><a class="header-anchor" href="#七、查看磁盘使用情况"><span>七、查看磁盘使用情况</span></a></h1><p>sar -d #磁盘使用详情统计，每间隔1秒钟统计一次总共统计三次：#sar -d 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -d 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:16</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       DEV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       tps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rd_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  wr_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgrq-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgqu-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     await</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     svctm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %util</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    dev8-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev253-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev253-1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:17</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       DEV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       tps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rd_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  wr_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgrq-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgqu-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     await</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     svctm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %util</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    dev8-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev253-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev253-1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:18</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       DEV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       tps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rd_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  wr_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgrq-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgqu-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     await</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     svctm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %util</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    dev8-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev253-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:08:19</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  dev253-1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">          DEV</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       tps</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rd_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  wr_sec/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgrq-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  avgqu-sz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     await</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     svctm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     %util</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       dev8-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     dev253-0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     dev253-1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DEV 磁盘设备的名称，如果不加-p，会显示dev253-0类似的设备名称，因此加上-p显示的名称更直接</p><p>tps：每秒I/O的传输总数</p><p>rd_sec/s 每秒读取的扇区的总数</p><p>wr_sec/s 每秒写入的扇区的总数</p><p>avgrq-sz 平均每次次磁盘I/O操作的数据大小（扇区）</p><p>avgqu-sz 磁盘请求队列的平均长度</p><p>await 从请求磁盘操作到系统完成处理，每次请求的平均消耗时间，包括请求队列等待时间，单位是毫秒（1秒等于1000毫秒），等于寻道时间+队列时间+服务时间</p><p>svctm I/O的服务处理时间，即不包括请求队列中的时间</p><p>%util I/O请求占用的CPU百分比，值越高，说明I/O越慢</p><h1 id="八、网络使用分析" tabindex="-1"><a class="header-anchor" href="#八、网络使用分析"><span>八、网络使用分析</span></a></h1><p>sar -n #统计网络信息</p><p>sar -n选项使用6个不同的开关：DEV，EDEV，NFS，NFSD，SOCK，IP，EIP，ICMP，EICMP，TCP，ETCP，UDP，SOCK6，IP6，EIP6，ICMP6，EICMP6和UDP6 ，DEV显示网络接口信息，EDEV显示关于网络错误的统计数据，NFS统计活动的NFS客户端的信息，NFSD统计NFS服务器的信息，SOCK显示套接字信息，ALL显示所有5个开关。它们可以单独或者一起使用。</p><p>1.10.1：sar -n DEV 1 1： 每间隔1秒统计一次，总计统计1次，下面的average是在多次统计后的平均值</p><p>#IFACE 本地网卡接口的名称</p><p>#rxpck/s 每秒钟接受的数据包</p><p>#txpck/s 每秒钟发送的数据库</p><p>#rxKB/S 每秒钟接受的数据包大小，单位为KB</p><p>#txKB/S 每秒钟发送的数据包大小，单位为KB</p><p>#rxcmp/s 每秒钟接受的压缩数据包</p><p>#txcmp/s 每秒钟发送的压缩包</p><p>#rxmcst/s 每秒钟接收的多播数据包</p><p>sar -n EDEV 1 1 #统计网络设备通信失败信息：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -n DEV 1 1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:13:52</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     IFACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   rxpck/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   txpck/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    rxkB/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    txkB/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   rxcmp/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   txcmp/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rxmcst/s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:13:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        lo</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     16.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     16.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.86</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.86</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:13:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      eth0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    132.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     25.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     14.28</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      2.34</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:13:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      eth1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:13:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      eth2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:13:53</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      eth3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        IFACE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   rxpck/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   txpck/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    rxkB/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    txkB/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   rxcmp/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   txcmp/s</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  rxmcst/s</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">           lo</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     16.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     16.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.86</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      1.86</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         eth0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    132.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     25.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">     14.28</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      2.34</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         eth1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         eth2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">         eth3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      0.00</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>IFACE 网卡名称</p><p>rxerr/s 每秒钟接收到的损坏的数据包</p><p>txerr/s 每秒钟发送的数据包错误数</p><p>coll/s 当发送数据包时候，每秒钟发生的冲撞（collisions）数，这个是在半双工模式下才有</p><p>rxdrop/s 当由于缓冲区满的时候，网卡设备接收端每秒钟丢掉的网络包的数目</p><p>txdrop/s 当由于缓冲区满的时候，网络设备发送端每秒钟丢掉的网络包的数目</p><p>txcarr/s 当发送数据包的时候，每秒钟载波错误发生的次数</p><p>rxfram 在接收数据包的时候，每秒钟发生的帧对其错误的次数</p><p>rxfifo 在接收数据包的时候，每秒钟缓冲区溢出的错误发生的次数</p><p>txfifo 在发生数据包 的时候，每秒钟缓冲区溢出的错误发生的次数</p><p>1.10.3：sar -n SOCK 1 1 #统计socket连接信息</p><p>sar -n SOCK 1 1 #统计socket连接信息</p><p>totsck 当前被使用的socket总数</p><p>tcpsck 当前正在被使用的TCP的socket总数</p><p>udpsck 当前正在被使用的UDP的socket总数</p><p>rawsck 当前正在被使用于RAW的skcket总数</p><p>if-frag 当前的IP分片的数目</p><p>tcp-tw TCP套接字中处于TIME-WAIT状态的连接数量</p><p>########如果你使用FULL关键字，相当于上述DEV、EDEV和SOCK三者的综合</p><p>sar -n TCP 1 3 #TCP连接的统计</p><p>active/s 新的主动连接</p><p>passive/s 新的被动连接</p><p>iseg/s 接受的段</p><p>oseg/s 输出的段</p><p>sar -n 使用总结</p><p>-n DEV ： 网络接口统计信息。</p><p>-n EDEV ： 网络接口错误。</p><p>-n IP ： IP数据报统计信息。</p><p>-n EIP ： IP错误统计信息。</p><p>-n TCP ： TCP统计信息。</p><p>-n ETCP ： TCP错误统计信息。</p><p>-n SOCK ： 套接字使用。</p><h1 id="九、进程-文件状态" tabindex="-1"><a class="header-anchor" href="#九、进程-文件状态"><span>九、进程，文件状态</span></a></h1><p>sar -v #进程、inode、文件和锁表状态 ，每间隔1秒钟统计一次总共统计三次：#sar -v 1 3</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">[</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">root@lgh </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">~</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"># sar -v 1 3</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Linux</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 2.6.32-696.el6.x86_64</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (lgh)   10/06/2019      _x86_64_        (</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">32</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:17:06</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dentunusd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   file-nr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  inode-nr</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    pty-nr</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:17:07</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2165205</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5440</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    371435</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:17:08</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2165205</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5440</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    371434</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10:17:09</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PM</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">   2165205</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5440</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    371434</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Average:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      2165205</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">      5440</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    371434</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">         1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>dentunusd 在缓冲目录条目中没有使用的条目数量</p><p>file-nr 被系统使用的文件句柄数量</p><p>inode-nr 已经使用的索引数量</p><p>pty-nr 使用的pty数量</p><p>###这里面的索引和文件句柄值不是ulimit -a查看到的值，而是sysctl.conf里面定义的和内核相关的值， max-file表示系统级别的能够打开的文件句柄的数量， 而ulimit -n控制进程级别能够打开的文件句柄的数量，可以使用sysctl -a | grep inode和sysctl -a | grep file查看，具体含义如下：</p><p>file-max中指定了系统范围内所有进程可打开的文件句柄的数量限制(系统级别， kernel-level)。 （The value in file-max denotes the maximum number of file handles that the Linux kernel will allocate）。当收到&quot;Too many open files in system&quot;这样的错误消息时， 就应该曾加这个值了。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># cat /proc/sys/fs/file-max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4096</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># echo 100000 &gt; /proc/sys/fs/file-max</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">或者</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># echo &quot;&quot;fs.file-max=65535&quot; &gt;&gt; /etc/sysctl.conf</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># sysctl -p</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>file -nr 可以查看系统中当前打开的文件句柄的数量。 他里面包括3个数字： 第一个表示已经分配了的文件描述符数量， 第二个表示空闲的文件句柄数量， 第三个表示能够打开文件句柄的最大值（跟file-max一致）。 内核会动态的分配文件句柄， 但是不会再次释放他们（这个可能不适应最新的内核了， 在我的file-nr中看到第二列一直为0， 第一列有增有减）</p><p>man bash， 找到说明ulimit的那一节：提供对shell及其启动的进程的可用资源（包括文件句柄， 进程数量， core文件大小等）的控制。 这是进程级别的， 也就是说系统中某个session及其启动的每个进程能打开多少个文件描述符， 能fork出多少个子进程等... 当达到上限时， 会报错&quot;Too many open files&quot;或者遇上Socket/File: Can’t open so many files等。</p><h1 id="十、常用命令" tabindex="-1"><a class="header-anchor" href="#十、常用命令"><span>十、常用命令</span></a></h1><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">默认监控:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> sar</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">     //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  CPU和IOWAIT统计状态</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -b</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> IO传送速率</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -B</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 页交换速率</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">3</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -c</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 进程创建的速率</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">4</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 块设备的活跃信息</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> DEV</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 网路设备的状态信息</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">6</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SOCK</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SOCK的使用情况</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">7</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -n</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ALL</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 所有的网络状态信息</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">8</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -P</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ALL</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 每颗CPU的使用状态信息和IOWAIT统计状态</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -q</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 队列的长度（等待运行的进程数）和负载的状态</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 内存和swap空间使用情况</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">11</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -R</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 内存的统计信息（内存页的分配和释放、系统每秒作为BUFFER使用内存页、每秒被cache到的内存页）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> CPU的使用情况和IOWAIT信息（同默认监控）</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">13</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> inode,</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> file</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> and</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> other</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> kernel</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> tablesd的状态信息</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">14</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -w</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 每秒上下文交换的数目</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">15</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -W</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> SWAP交换的统计信息</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">监控状态同iostat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 的si</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> so</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">16</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -x</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2906</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 显示指定进程</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">2906</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">的统计信息，信息包括：进程造成的错误、用户级和系统级用户CPU的占用情况、运行在哪颗CPU上</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">17</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> sar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -y</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">       //</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TTY设备的活动状态</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">18</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> 将输出到文件(-o</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)和读取记录信息(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">-f</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,118)]))}const e=i(n,[["render",l]]),d=JSON.parse('{"path":"/article/t9ghyrme/","title":"linux sar 命令详解(历史资源查看，如内存、CUP等等)","lang":"zh-CN","frontmatter":{"title":"linux sar 命令详解(历史资源查看，如内存、CUP等等)","createTime":"2025/02/27 13:58:19","permalink":"/article/t9ghyrme/","tags":["linux"]},"headers":[],"readingTime":{"minutes":13.11,"words":3932},"git":{"updatedTime":1748327835000,"contributors":[{"name":"ShaddockWong","username":"ShaddockWong","email":"420434838@qq.com","commits":1,"avatar":"https://avatars.githubusercontent.com/ShaddockWong?v=4","url":"https://github.com/ShaddockWong"}]},"filePathRelative":"2.Linux/1.linux sar 命令详解(历史资源查看，如内存、CUP等等).md","categoryList":[{"id":"733df4","sort":2,"name":"Linux"}]}');export{e as comp,d as data};
